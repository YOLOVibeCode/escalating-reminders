# ============================================
# ESCALATING REMINDERS - API ENVIRONMENT
# ============================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control

# ============================================
# DATABASE
# ============================================
# PostgreSQL connection string
# Local: postgresql://postgres:postgres@localhost:3802/escalating_reminders?schema=public
# Railway: Use DATABASE_URL from Railway dashboard
DATABASE_URL=postgresql://postgres:postgres@localhost:3802/escalating_reminders?schema=public

# Test database (optional - for running tests)
TEST_DATABASE_URL=postgresql://postgres:postgres@localhost:3802/escalating_reminders_test?schema=public

# ============================================
# REDIS
# ============================================
# Redis connection for caching and queues
# Local: redis://localhost:3803
# Railway: Use REDIS_URL from Railway dashboard
REDIS_URL=redis://localhost:3803

# ============================================
# JWT AUTHENTICATION
# ============================================
# Generate with: openssl rand -hex 32
# IMPORTANT: Use different secrets for sandbox vs production!
JWT_SECRET=GENERATE_WITH_openssl_rand_-hex_32
JWT_REFRESH_SECRET=GENERATE_WITH_openssl_rand_-hex_32

# Token expiration (optional - defaults shown)
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# ============================================
# GOOGLE OAUTH
# ============================================
# Get from: https://console.cloud.google.com/apis/credentials
# See: docs/GOOGLE-OAUTH-SETUP.md
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=GOCSPX-your-google-client-secret

# OAuth redirect base URL (your frontend URL)
# Local: http://localhost:3800
# Production: https://your-domain.com
OAUTH_REDIRECT_BASE_URL=http://localhost:3800

# ============================================
# EMAIL / SMTP
# ============================================
# Local development uses MailHog (no auth needed)
# Production: Use your email service (SendGrid, AWS SES, etc.)
SMTP_HOST=localhost
SMTP_PORT=3811
SMTP_FROM=noreply@escalating-reminders.local
SMTP_USER=
SMTP_PASSWORD=
SMTP_SECURE=false

# MailHog web UI (local only)
MAILHOG_BASE_URL=http://localhost:3810

# ============================================
# SQUARE PAYMENTS
# ============================================
# Get from: https://developer.squareup.com/apps
# See: docs/SQUARE-SETUP.md

# Active environment: sandbox | production
SQUARE_ENVIRONMENT=sandbox

# --- SANDBOX CREDENTIALS ---
SQUARE_ACCESS_TOKEN_SANDBOX=your-sandbox-access-token
SQUARE_APPLICATION_ID_SANDBOX=sandbox-sq0idb-your-sandbox-app-id

# --- PRODUCTION CREDENTIALS ---
SQUARE_ACCESS_TOKEN_PRODUCTION=your-production-access-token
SQUARE_APPLICATION_ID_PRODUCTION=sq0idp-your-production-app-id

# --- SHARED SETTINGS ---
# Location ID from Square Dashboard > Locations
SQUARE_LOCATION_ID=your-location-id

# Webhook signature key from Square Dashboard > Webhooks
SQUARE_WEBHOOK_SIGNATURE_KEY=your-webhook-signature-key

# Subscription Plan IDs (create in Square Dashboard > Catalog > Subscriptions)
SQUARE_PLAN_PERSONAL=
SQUARE_PLAN_PRO=
SQUARE_PLAN_FAMILY=

# ============================================
# APPLICATION
# ============================================
# Environment: development | production | test
NODE_ENV=development

# API server port (default: 3801)
PORT=3801

# CORS origin (your frontend URL)
CORS_ORIGIN=http://localhost:3800

# ============================================
# SECURITY (Optional)
# ============================================
# Encryption key for sensitive data
# Generate with: openssl rand -hex 32
ENCRYPTION_KEY=

# ============================================
# RATE LIMITING / DELIVERY POLICY (Optional)
# ============================================
USAGE_SUSPENSION_WINDOW_DAYS=3
USAGE_SUSPENSION_ALLOWANCE_PER_WINDOW=3

# ============================================
# SEEDING (Development Only)
# ============================================
# Force enable seeding in any environment
ENABLE_SEEDING=false

# ============================================
# PORT REFERENCE (38XX Series)
# ============================================
# 3800 - Web App (Next.js)
# 3801 - API (NestJS)
# 3802 - PostgreSQL
# 3803 - Redis
# 3804 - Prisma Studio
# 3805 - Storybook
# 3810 - MailHog Web UI
# 3811 - MailHog SMTP
# 3812 - Webhook Receiver (E2E tests)
